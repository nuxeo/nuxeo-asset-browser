<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.dam.actions">

  <require>org.nuxeo.ecm.platform.actions</require>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="actions">

    <action id="dam" link="assets" label="label.main.tab.dam" order="50">
      <category>MAIN_TABS</category>
    </action>

    <action id="damClearSearch" link="#{damSearchActions.clearSearch()}"
      label="command.faceted.search.clear" order="10" immediate="true">
      <category>DAM_SEARCH_FILTER_ACTIONS</category>
      <properties>
        <property name="ajaxSupport">true</property>
        <property name="ajaxReRender">
          damPanelLeft, damPanelCenter, damPanelRight
        </property>
      </properties>
    </action>

    <action id="damSubmitSearch" link="#{damSearchActions.refreshAndRewind()}"
      label="command.faceted.search.go" order="20">
      <category>DAM_SEARCH_FILTER_ACTIONS</category>
      <properties>
        <property name="ajaxSupport">true</property>
        <property name="ajaxReRender">
          damPanelCenter, damPanelRight
        </property>
      </properties>
    </action>

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="filters">

    <filter id="canCreateInAssetLibrary">
      <rule grant="true">
        <condition>#{damActions.canCreateInAssetLibrary}</condition>
      </rule>
    </filter>

    <filter id="create" append="true">
      <rule grant="true">
        <type>AssetLibrary</type>
      </rule>
    </filter>

    <filter id="importFile" append="true">
      <rule grant="true">
        <type>AssetLibrary</type>
      </rule>
    </filter>

  </extension>

</component>
