<?xml version="1.0" encoding="UTF-8"?>
<component name="org.nuxeo.dam.layouts">

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">

    <widget name="damPanelLeft" type="currentDocumentActionsWithForms">
      <properties widgetMode="view">
        <property name="category">DAM_PANEL_LEFT</property>
      </properties>
    </widget>

    <widget name="damPanelCenter" type="currentDocumentActions">
      <properties widgetMode="view">
        <property name="category">DAM_PANEL_CENTER</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
      </controls>
    </widget>

    <widget name="damPanelRight" type="currentDocumentActions">
      <properties widgetMode="view">
        <property name="category">DAM_PANEL_RIGHT</property>
      </properties>
      <controls mode="any">
        <control name="requireSurroundingForm">false</control>
      </controls>
    </widget>

    <widget name="damSearchesSelector" type="template">
      <properties widgetMode="any">
        <property name="template">/dam/widgets/dam_searches_selector_widget_template.xhtml</property>
      </properties>
    </widget>

    <widget name="damSearchFilters" type="template">
      <properties widgetMode="any">
        <property name="template">/dam/widgets/dam_search_filters_widget_template.xhtml</property>
      </properties>
    </widget>

    <widget name="damSearchActions" type="template">
      <properties widgetMode="any">
        <property name="template">/dam/widgets/dam_search_actions_widget_template.xhtml</property>
      </properties>
    </widget>

    <widget name="damSearchResults" type="template">
      <properties widgetMode="any">
        <property name="template">/dam/widgets/dam_search_results_widget_template.xhtml</property>
      </properties>
    </widget>

    <widget name="damAssetDetails" type="currentDocumentActionsWithForms">
      <properties widgetMode="view">
        <property name="category">DAM_ASSET_DETAILS</property>
      </properties>
    </widget>

    <widget name="damc_author" type="text">
      <labels>
        <label mode="any">label.dam.damc.author</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>damc:author</field>
      </fields>
      <properties widgetMode="edit">
        <property name="styleClass">dataInputText</property>
      </properties>
    </widget>

    <widget name="damc_authoringDate" type="datetime">
      <labels>
        <label mode="any">label.dam.damc.authoringDate</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>damc:authoringDate</field>
      </fields>
      <properties widgetMode="view">
        <property name="pattern">#{nxu:basicDateFormater()}</property>
      </properties>
      <properties widgetMode="edit">
        <property name="format">#{nxu:basicDateFormater()}</property>
        <property name="styleClass">dataInputTextDate</property>
      </properties>
    </widget>

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="actions">

    <action id="damSearchSelectors" type="widget" order="100">
      <category>DAM_PANEL_LEFT</category>
      <properties>
        <property name="widgetName">damSearchSelectors</property>
      </properties>
    </action>

    <action id="damSearchFilters" type="widget" order="200">
      <category>DAM_PANEL_LEFT</category>
      <properties>
        <property name="widgetName">damSearchFilters</property>
      </properties>
    </action>

    <action id="damSearchActions" type="widget" order="300">
      <category>DAM_PANEL_LEFT</category>
      <properties>
        <property name="widgetName">damSearchActions</property>
      </properties>
    </action>

    <action id="damSearchResults" type="widget" order="100">
      <category>DAM_PANEL_CENTER</category>
      <properties>
        <property name="widgetName">damSearchResults</property>
      </properties>
    </action>

    <action id="damAssetDetails" type="widget" order="100">
      <category>DAM_PANEL_RIGHT</category>
      <properties>
        <property name="widgetName">damAssetDetails</property>
      </properties>
    </action>

    <action id="damPictureView" type="widget" order="100">
      <category>DAM_ASSET_DETAILS</category>
      <properties>
        <property name="widgetName">summary_picture_view</property>
      </properties>
      <filter-id>hasPictureFacet</filter-id>
    </action>

    <action id="damVideoView" type="widget" order="100">
      <category>DAM_ASSET_DETAILS</category>
      <properties>
        <property name="widgetName">summary_video_player</property>
      </properties>
      <filter-id>hasVideoFacet</filter-id>
    </action>

  </extension>

  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
    point="filters">

    <filter id="hasVideoFacet">
      <rule grant="true">
        <facet>Video</facet>
      </rule>
    </filter>

  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="gridDamLayout">
      <templates>
        <template mode="any">
          /layouts/layout_grid_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <properties mode="any">
            <property name="nxl_gridStyleClass_0">gridStyle2</property>
            <property name="nxl_gridStyleClass_1">gridStyle6</property>
            <property name="nxl_gridStyleClass_2">gridStyle4</property>
          </properties>
          <widget>damPanelLeft</widget>
          <widget>damPanelCenter</widget>
          <widget>damPanelRight</widget>
        </row>
      </rows>
    </layout>

    <layout name="dam_common">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml</template>
      </templates>
      <rows>
        <row>
          <widget>damc_author</widget>
        </row>
        <row>
          <widget>damc_authoringDate</widget>
        </row>
      </rows>
    </layout>

  </extension>

</component>
